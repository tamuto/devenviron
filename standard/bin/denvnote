#!/bin/bash
DENV_HOST=`hostname -I | awk '{ print $1 }'`
podman run \
    --rm -d \
    --add-host="denv.host:$DENV_HOST" \
    --name jupyter \
    -v $PWD:$PWD -w $PWD \
    -v ~/.devenviron/.gitconfig:/root/.gitconfig \
    -v ~/.devenviron/.git-credentials:/root/.git-credentials \
    -v ~/.devenviron/.awsconfig:/root/.aws/config \
    -v ~/.devenviron/.aws-credentials:/root/.aws/credentials \
    -v ~/.devenviron/.npmrc:/root/.npmrc \
    -v ~/.devenviron/.ssh:/root/.ssh \
    -p $1:8888 \
    tamuto/devenviron:latest \
    jupyter notebook --allow-root --ip 0.0.0.0 --no-browser --NotebookApp.token='' \
    ${@:2}
